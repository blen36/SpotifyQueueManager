{% extends 'jukebox/base.html' %}

{% block content %}
<div class="row justify-content-center mt-4">
    <div class="col-md-6 col-lg-5 text-center">

        <div class="mb-4">
            <span class="text-secondary text-uppercase small ls-1">Код комнаты</span>
            <h2 class="display-6 fw-bold">{{ room.code }}</h2>
        </div>

        <div id="music-player"
             class="glass-panel p-4 mb-4"
             hx-get="/api/current-song"
             hx-trigger="every 1000ms"
             hx-swap="innerHTML">

            <div class="mb-3">
                <img src="https://placehold.co/300x300/181818/white?text=No+Music"
                     alt="Album Cover"
                     class="img-fluid rounded shadow-lg"
                     style="max-width: 250px;">
            </div>

            <div class="mb-3">
                <h3 class="h5 fw-bold mb-0 text-white">Нет активного трека</h3>
                <p class="text-secondary small">Включите музыку в Spotify</p>
            </div>

            <div class="progress mb-3" style="height: 4px; background-color: #535353;">
                <div class="progress-bar bg-success" role="progressbar" style="width: 0%"></div>
            </div>

            <div class="d-flex justify-content-center align-items-center gap-3">

                <button class="btn btn-link text-secondary p-0"
                        hx-put="/api/pause"
                        hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                        hx-swap="none">
                    <i class="bi bi-pause-circle-fill" style="font-size: 3rem;"></i>
                </button>

                <button class="btn btn-link text-white p-0 hover-scale"
                        hx-put="/api/play"
                        hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                        hx-swap="none">
                    <i class="bi bi-play-circle-fill text-success" style="font-size: 4rem;"></i>
                </button>

                <button class="btn btn-link text-secondary p-0"
                        hx-post="/api/skip"
                        hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                        hx-swap="none">
                    <i class="bi bi-skip-end-fill" style="font-size: 2.5rem;"></i>
                </button>
            </div>

        </div>
        {% if is_host %}
            <div class="alert alert-dark text-white border-0 bg-opacity-10 small">
                Вы ведущий этой комнаты
            </div>
        {% endif %}

    </div>
</div>

<style>
    .hover-scale { transition: transform 0.2s; }
    .hover-scale:active { transform: scale(0.95); }
</style>
{% endblock %}